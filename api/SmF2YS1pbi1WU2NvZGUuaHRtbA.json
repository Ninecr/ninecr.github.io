{"title":"VScode 配置 Java 开发环境","date":"2021-06-28T03:02:58.000Z","date_formatted":{"ll":"Jun 28, 2021","L":"06/28/2021","MM-DD":"06-28"},"link":"Java-in-VScode.html","tags":["Java","VSCode"],"categories":["Programming"],"updated":"2021-07-01T09:27:32.413Z","content":"<p>下学期的专选课可能要学习 Java（<del>你要是没选到怎么办？</del>好了已经选到了），专选课估计没什么高要求，就先不上 IDEA 了，直接配到 VSCode 里，记录在这里也可供同学参考。目前只有单文件部分，似乎是可以编写项目的，熟悉下 Java 后再更新进去。</p>\n<h2 id=\"环境准备\">环境准备<a title=\"#环境准备\" href=\"#环境准备\"></a></h2>\n<p>这一部分不是本文重点，不详细叙述。</p>\n<h3 id=\"jdk-安装\">JDK 安装<a title=\"#jdk-安装\" href=\"#jdk-安装\"></a></h3>\n<p>可以直接官网下载，不管是 Oracle 的还是 OpenJDK 都行，添加环境变量</p>\n<ul>\n<li><code>JAVA_HOME</code>： JDK 文件夹路径，如 <code>D:\\ProgramFiles\\jdk-15.0.2</code></li>\n<li><code>Path</code>：添加 <code>%JAVA_HOME%\\bin</code></li>\n<li><code>CLASSPATH</code>（可不配置）：<code>.;%JAVA_HOME%\\lib\\dt.jar;%JAVA_HOME%\\lib\\tools.jar;</code></li>\n</ul>\n<p>打开 cmd 输入 <code>Java -version</code> 得到版本信息输出则安装完成。</p>\n<h3 id=\"vscode-安装\">VSCode 安装<a title=\"#vscode-安装\" href=\"#vscode-安装\"></a></h3>\n<p>VSCode 有多种版本可供选择，这里使用的是 64 位系统安装程序的稳定版本，在<a href=\"https://code.visualstudio.com\" target=\"_blank\">官网</a>的底部选择下载。开箱如果不是中文到扩展页搜索安装 Chinese 重启即可。</p>\n<h2 id=\"环境配置\">环境配置<a title=\"#环境配置\" href=\"#环境配置\"></a></h2>\n<p>我的 VSCode 采用单文件夹工作区，所以在合适的目录下面新建一个 Java 文件夹并用 VSCode 打开，作为 Java 的工作区，下面介绍两种运行 Java 程序的配置方法。</p>\n<h3 id=\"code-runner\">Code Runner<a title=\"#code-runner\" href=\"#code-runner\"></a></h3>\n<p>Code Runner 是一个可以运行多种语言的非常不错的扩展，安装之后在工作区新建 <code>.vscode</code> 工作区配置文件夹，在其中创建工作区配置文件 <code>settings.json</code>：</p>\n<figure class=\"highlight json\"><figcaption><span>settings.json</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;code-runner.runInTerminal&quot;</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 将程序在 Terminal 运行而不是在输出中，便于交互输入</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;code-runner.executorMap&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">&quot;java&quot;</span>: <span class=\"string\">&quot;javac -encoding utf8 $fileName -d C:/vscode/Java/out/ &amp;&amp; cd C:/vscode/Java/out/ &amp;&amp; java $fileNameWithoutExt&quot;</span> <span class=\"comment\">// 对中文按 UTF-8 进行编码、将编译的 class 文件统一放到工作区下的 out 目录里</span></span><br><span class=\"line\">        <span class=\"comment\">// 如果第一项配置为 flase，即将程序运行到输出，使用下面的配置避免中文乱码</span></span><br><span class=\"line\">        <span class=\"comment\">// &quot;java&quot;: &quot;javac -encoding utf8 $fileName -d C:/vscode/Java/out/ &amp;&amp; cd C:/vscode/Java/out/ &amp;&amp; java -Dfile.encoding=UTF-8 $fileNameWithoutExt&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">&quot;code-runner.preserveFocus&quot;</span>: <span class=\"literal\">false</span>, <span class=\"comment\">// 若为 false，run code 后光标会聚焦到终端上。如果需要频繁输入数据可设为 false</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;code-runner.saveFileBeforeRun&quot;</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// run code 前保存</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;code-runner.fileDirectoryAsCwd&quot;</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 将 code runner 终端的工作目录切换到文件目录再运行，对依赖 cwd 的程序产生影响；如果为 false，executorMap 要加 cd $dir</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;java.debug.settings.enableRunDebugCodeLens&quot;</span>: <span class=\"literal\">false</span> <span class=\"comment\">// 不显示 Debugger for Java 插件的 run 和 debug 按钮</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>在工作区新建一个 <code>Hello.java</code>：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Hello</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;Hello, World.\\n你好世界！&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>点击右上角的运行或者使用快捷键 <code>Ctrl + Alt + N</code> 运行这段代码。</p>\n<h3 id=\"java-扩展包\">Java 扩展包<a title=\"#java-扩展包\" href=\"#java-扩展包\"></a></h3>\n<img src=\"https://i.loli.net/2021/07/01/uHACy8B9Dj3WGsn.png\" alt=\"image-20210701163239475\"  />\n<p>在扩展页面搜索 java，安装 Java Extension Pack 扩展，这时一定程度上已经可以愉快地食用了，点击 <code>Hello.java</code> 文件中类名下方的 Run，在终端得到输出，如果你的中文出现了乱码，检查 VSCode 右下角的编码是不是 UTF-8，Windows 终端输出的编码是 UTF-8。</p>\n<blockquote>\n<p>如果你的 java 文件没有主类，只有一个类时也会在类名下得到 Run 和 Debug 的按钮并且可以运行。</p>\n</blockquote>\n<p>在 Java Extension Pack 中 Debugger for Java 扩展的支持下，你可以不需要配置工作区的 <code>launch.json</code> 文件，只要在行号前单击打好断点并点击 Debug，就可以愉快地开始调试。但很快就愉快不起来了(bushi，步进时单步进入了 println，大概没人会想这么调试，那就只能配置 <code>launch.json</code> <img src=\"https://i.loli.net/2021/07/01/l5VFHIr3a4pXTwm.png\" alt=\"image-20210701164949314\" loading=\"lazy\"></p>\n<p>新建 <code>.vscode\\launch.json</code> 调试配置文件：</p>\n<figure class=\"highlight json\"><figcaption><span>launch.json</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;version&quot;</span>: <span class=\"string\">&quot;0.2.0&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;configurations&quot;</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span>: <span class=\"string\">&quot;java&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span>: <span class=\"string\">&quot;Launch Current File&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;request&quot;</span>: <span class=\"string\">&quot;launch&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;mainClass&quot;</span>: <span class=\"string\">&quot;$&#123;file&#125;&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;stepFilters&quot;</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;skipClasses&quot;</span>: [ <span class=\"comment\">// 单步时跳过的类，根据需要添加</span></span><br><span class=\"line\">                    <span class=\"string\">&quot;$JDK&quot;</span>,</span><br><span class=\"line\">                    <span class=\"string\">&quot;junit.*&quot;</span>,</span><br><span class=\"line\">                    <span class=\"string\">&quot;printstream&quot;</span></span><br><span class=\"line\">                ],</span><br><span class=\"line\">                <span class=\"attr\">&quot;skipSynthetics&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;skipStaticInitializers&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;skipConstructors&quot;</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>此时使用 F5 进行调试，不会步入 println，但是点击 Debug 调试仍然会，原因是点击 Run 或 Debug 时，Debugger for Java 扩展会在 <code>launch.json</code> 中添加一个以运行的类名为主类名的默认配置，没有过滤类。所以如果不想 <code>launch.json</code> 越用越长，建议只使用 F5 以默认配置运行和调试，当然如果你对上面的问题需求不大，你也可以根本不创建 <code>launch.json</code>。</p>\n<p>我使用 F5 进行调试，那我现在不想在主类名下面看到 Run 和 Debug 的按键，可以在工作区的 <code>settings.json</code> 里加一句 <code>&quot;java.debug.settings.enableRunDebugCodeLens&quot;: false</code>，世界干净了。</p>\n<h3 id=\"end\">End<a title=\"#end\" href=\"#end\"></a></h3>\n<p>尽管删了不少，还是感觉废话很多，这大概也是不想更 blog 的重要原因之一，过于流水账了，有待改进……</p>\n","prev":{"title":"Vivado 更新板存储库之坑","link":"vivado-update-board-repo.html"},"next":{"title":"在 Vivaldi 中使用 Bing 壁纸的 Chrome 新标签页","link":"vivaldi-edge-chrome.html"},"plink":"https://ninecr.tk/Java-in-VScode.html/","toc":[{"id":"环境准备","title":"环境准备","index":"1","children":[{"id":"jdk-安装","title":"JDK 安装","index":"1.1"},{"id":"vscode-安装","title":"VSCode 安装","index":"1.2"}]},{"id":"环境配置","title":"环境配置","index":"2","children":[{"id":"code-runner","title":"Code Runner","index":"2.1"},{"id":"java-扩展包","title":"Java 扩展包","index":"2.2"},{"id":"end","title":"End","index":"2.3"}]}],"copyright":{"link":"<a href=\"https://ninecr.tk/Java-in-VScode.html/\" title=\"VScode 配置 Java 开发环境\">https://ninecr.tk/Java-in-VScode.html/</a>","license":"Attribution-NonCommercial-ShareAlike 4.0 (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-SA 4.0</a>)"}}